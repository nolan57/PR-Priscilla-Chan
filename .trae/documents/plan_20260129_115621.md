# Fix separate_vocals.py to Correctly Skip Existing Vocal Files

## Problem Analysis
The current script fails to skip existing files because:

1. **Filename Mismatch**: UVR adds `_({Vocals})` suffix to output files (e.g., `song.wav` â†’ `song_(Vocals).wav`)
2. **Incorrect Check**: The script checks for `song.wav` in output directory, but only `song_(Vocals).wav` exists
3. **UVR Processing**: UVR processes entire folders at once, so we must check all files in a folder before skipping it

## Solution Plan

### Step 1: Update File Existence Check Logic
- Modify the script to check for output files with the correct vocal stem suffix
- Use the `VOCAL_STEM` constant (typically "Vocals") to construct proper output filenames
- Update the directory processing logic to check for these correctly named files

### Step 2: Enhance Directory-Level Processing
- For each input directory, check if all WAV files have corresponding `_({Vocals}).wav` files in the output directory
- Only skip directories where ALL files have been processed
- Maintain the existing folder-level processing required by UVR

### Step 3: Add Debug Output
- Add informative debug messages to indicate when files/directories are skipped
- Show which files are missing and need processing
- Maintain compatibility with existing debug mode

### Step 4: Test and Validate
- Verify the script correctly identifies existing vocal files
- Ensure new files are processed appropriately
- Test with different directory structures

## Key Changes
- Modify output path construction to include `_({Vocals})` suffix
- Update file existence check to look for correctly named output files
- Maintain folder-level processing required by UVR
- Add clear debug output for better diagnostics

This modification will ensure the script efficiently skips folders that have already been processed, saving time and computational resources by avoiding redundant processing.